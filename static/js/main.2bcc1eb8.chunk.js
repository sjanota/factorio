(this.webpackJsonpfactorio=this.webpackJsonpfactorio||[]).push([[0],{52:function(e,t,n){e.exports=n(69)},57:function(e,t,n){},62:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),l=n.n(c),u=(n(57),n(80)),i=n(6),o=n(10),s=n(12),p={Assembly:"Assembly",Drill:"Drill",Furnace:"Furnace",ChemicalPlant:"ChemicalPlant"},m={"Chemical science pack":{inputs:{Sulfur:1,"Advanced circuit":3,"Engine unit":2},duration:24,products:2,machineType:p.Assembly},"Military science pack":{inputs:{Wall:2,Grenade:1,"Piercing rounds magazine":1},duration:10,products:2,machineType:p.Assembly},"Advanced circuit":{machineType:p.Assembly,inputs:{"Electronic circuit":2,"Copper wire":4,"Plastic bar":2},duration:6,products:1},"Plastic bar":{machineType:p.ChemicalPlant,duration:1,products:2},Sulfur:{machineType:p.ChemicalPlant,duration:1,products:2},"Engine unit":{machineType:p.Assembly,inputs:{"Steel plate":1,"Iron gear wheel":4,Pipe:2},duration:10,products:1},Pipe:{machineType:p.Assembly,inputs:{"Iron plate":1},duration:.5,products:1},Stone:{duration:1,products:1,machineType:p.Furnace},Coal:{duration:1,products:1,machineType:p.Drill},"Stone brick":{inputs:{Stone:2},duration:3.2,products:1,machineType:p.Furnace},Wall:{inputs:{"Stone brick":5},duration:.5,products:1,machineType:p.Assembly},Grenade:{inputs:{Coal:10,"Iron plate":5},duration:8,products:1,machineType:p.Assembly},"Piercing rounds magazine":{inputs:{"Copper plate":5,"Firearm magazine":1,"Steel plate":1},duration:3,products:1,machineType:p.Assembly},"Steel plate":{inputs:{"Iron plate":5},duration:16,products:1,machineType:p.Furnace},"Firearm magazine":{inputs:{"Iron plate":4},duration:1,products:1,machineType:p.Assembly},"Logistic science pack":{inputs:{Inserter:1,"Transport belt":1},duration:6,products:1,machineType:p.Assembly},Inserter:{inputs:{"Electronic circuit":1,"Iron plate":1,"Iron gear wheel":1},duration:.5,products:1,machineType:p.Assembly},"Iron ore":{duration:1,products:1,machineType:p.Drill},"Copper ore":{duration:1,products:1,machineType:p.Drill},"Iron plate":{inputs:{"Iron ore":1},duration:3.2,products:1,machineType:p.Furnace},"Iron gear wheel":{inputs:{"Iron plate":2},duration:.5,products:1,machineType:p.Assembly},"Copper plate":{inputs:{"Copper ore":1},duration:3.2,products:1,machineType:p.Furnace},"Copper wire":{inputs:{"Copper plate":1},duration:.5,products:2,machineType:p.Assembly},"Electronic circuit":{inputs:{"Iron plate":1,"Copper wire":3},duration:.5,products:1,machineType:p.Assembly},"Automation science pack":{inputs:{"Copper plate":1,"Iron gear wheel":1},duration:5,products:1,machineType:p.Assembly},"Transport belt":{inputs:{"Iron plate":1,"Iron gear wheel":1},duration:.5,products:2,machineType:p.Assembly}},d=function(){return m},b=function(e,t){return d()[t.item]},y=n(50),f=n(13);function E(e,t){var n=Object.entries(e.inputs).reduce((function(n,a){var r=Object(f.a)(a,2),c=r[0],l=r[1];return[].concat(Object(y.a)(n),[[c,l*t/e.products]])}),[]);return Object.fromEntries(n)}var h,g=n(9),v=(h={},Object(g.a)(h,p.Assembly,[{speed:.5,name:"Mk1"},{speed:.75,name:"Mk2"},{speed:1.25,name:"Mk3"}]),Object(g.a)(h,p.Drill,[{speed:.25,name:"Burning"},{speed:.5,name:"Electric"}]),Object(g.a)(h,p.Furnace,[{speed:1,name:"Stone"},{speed:2,name:"Steel"},{speed:2,name:"Electric"}]),Object(g.a)(h,p.ChemicalPlant,[{speed:1,name:"Regular"}]),h),O=Object(o.b)({name:"machineGrades",initialState:Object.fromEntries(Object.values(p).map((function(e){return[e,0]}))),reducers:{setGrade:function(e,t){var n=t.payload,a=n.type,r=n.grade;e[a]=r}}}),j=O.actions.setGrade,S=O.reducer,C=function(e){return e.machineGrades},T=Object(s.a)([C,b],(function(e,t){if(t){var n=e[t.machineType];return v[t.machineType][n]}})),k=n(20);function I(e,t,n){if(!e.inputs)return{};var a=E(e,n);return Object.entries(a).reduce((function(e,n){var a=Object(f.a)(n,2),r=a[0],c=a[1];return function(e,t){var n=Object.keys(t),a=Object.keys(e).filter((function(e){return n.includes(e)})),r=Object(k.a)({},e,{},t);return a.reduce((function(n,a){return Object(k.a)({},n,Object(g.a)({},a,e[a]+t[a]))}),r)}(e,I(t[r],t,c))}),a)}var A=Object(o.b)({name:"science",initialState:{mining:0},reducers:{setMiningLevel:function(e,t){var n=t.payload;e.mining=n}}}),w=A.actions.setMiningLevel,M=A.reducer,N=function(e){return e.science},B=Object(o.b)({name:"demand",initialState:{item:null,targetSupply:1},reducers:{setCurrentRecipe:function(e,t){var n=t.payload;e.item=n},setTargetSupply:function(e,t){var n=t.payload;e.targetSupply=n}}}),G=B.actions,L=G.setCurrentRecipe,R=G.setTargetSupply,F=B.reducer,D=function(e){return e.demand.item},P=function(e){return e.demand.targetSupply},x=(Object(s.a)([b,function(e,t){return t.targetSupply}],(function(e,t){if(e&&e.inputs)return E(e,t)})),Object(s.a)([b,d,function(e,t){return t.targetSupply}],(function(e,t,n){if(e)return e.inputs?I(e,t,n):{}}))),z=Object(s.a)([b,T,N,function(e,t){return t.targetSupply}],(function(e,t,n,a){if(e){var r=t.speed;return e.machineType===p.Drill&&(r*=1+.1*n.mining),function(e,t,n){return Math.ceil(e.duration/n*t/60/e.products)}(e,a,r)}})),V=n(79),J=n(75),W=n(47),q="Normal",H="Fast",$="Express",K="Overloaded";var Q,U=function(e){return function(t){return function(n){return!!n[e]&&r.a.createElement(t,n)}}},X=Object(i.b)((function(e,t){return{requiredMachines:z(e,t),recipe:b(0,t)}}))(U("item")((function(e){var t=e.requiredMachines,n=e.recipe;return r.a.createElement("span",null,t," ",n.machineType)}))),Y=(n(62),function(){return r.a.createElement("small",null,r.a.createElement("sup",null,"pcs"),"/",r.a.createElement("sub",null,"min"))}),Z=n(25),_=n(21),ee=n(78),te=n(74),ne=(Q={},Object(g.a)(Q,q,"Regular transport belts"),Object(g.a)(Q,H,"Fast transport belts"),Object(g.a)(Q,$,"Express transport belts"),Object(g.a)(Q,K,"The belt is overloaded, you need to use more then one parallel belt or split the process"),Q),ae=function(e){var t=e.beltType;return r.a.createElement(ee.a,{placement:"left",overlay:function(e){return r.a.createElement(te.a,Object.assign({id:"button-tooltip"},e),ne[t])}},r.a.createElement("span",{className:"belt-type-".concat(t.toLowerCase())},r.a.createElement(Z.a,{icon:_.a,size:"lg"})))},re=function(e){var t=e.item,n=e.targetSupply,a=function(e){return e<=900?q:e<=1800?H:e<=2700?$:K}(n);return r.a.createElement(V.a.Item,{className:"ingredients-row belt-".concat(a.toLowerCase())},r.a.createElement(J.a,null,r.a.createElement(W.a,{sm:5},t),r.a.createElement(W.a,{sm:3},n," ",r.a.createElement(Y,null)),r.a.createElement(W.a,{sm:3},r.a.createElement(X,{item:t,targetSupply:n})),r.a.createElement(W.a,null,r.a.createElement(ae,{beltType:a}))))},ce=Object(i.b)((function(e,t){return{ingredients:x(e,t)}}))((function(e){var t=e.ingredients;return r.a.createElement(V.a,{className:"list-group-flush"},Object.entries(t).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement(re,{key:n,item:n,targetSupply:a})})))})),le=Object(i.b)((function(e){return{item:D(e),targetSupply:P(e)}}))(U("item")(ce)),ue=n(77),ie=n(76),oe={setTargetSupply:R,setCurrentRecipe:L},se=Object(i.b)((function(e,t){return{item:D(e),targetSupply:P(e),availableRecipes:Object.keys(d()),requiredMachines:z(e,t),recipe:b(0,t)}}),oe)((function(e){var t=e.setTargetSupply,n=e.setCurrentRecipe,c=e.item,l=e.availableRecipes,u=e.targetSupply,i=Object(a.useRef)();function o(e){e.preventDefault();var n=Number.parseInt(i.current.value);t(n)}return r.a.createElement(ue.a,{onSubmit:o},r.a.createElement(ue.a.Row,null,r.a.createElement(ue.a.Group,{as:W.a,sm:5,className:"mb-0"},r.a.createElement(ue.a.Control,{as:"select",placeholder:"Item",custom:!0,defaultValue:c,onChange:function(e){return n(e.target.value)}},r.a.createElement("option",{value:c},c),l.sort().map((function(e){return e!==c&&r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(ue.a.Group,{as:W.a,sm:3,className:"mb-0"},r.a.createElement(ie.a,null,r.a.createElement(ue.a.Control,{type:"number",placeholder:"Target Supply",step:"1",defaultValue:u,ref:i,onBlur:o}),r.a.createElement(ie.a.Append,null,r.a.createElement(ie.a.Text,null,r.a.createElement(Y,null))))),r.a.createElement(W.a,{className:"d-flex align-items-center pl-3"},r.a.createElement(X,{item:c,targetSupply:u}))))})),pe=n(51),me=function(e){var t=e.collapsed,n=e.onClick;return r.a.createElement(Z.a,{icon:t?_.b:_.c,onClick:n})},de=function(e){var t=e.header,n=e.children,c=e.initallyCollapsed,l=void 0!==c&&c,i=Object(pe.a)(e,["header","children","initallyCollapsed"]),o=Object(a.useState)(l),s=Object(f.a)(o,2),p=s[0],m=s[1];return r.a.createElement(u.a,i,r.a.createElement(u.a.Header,{className:"d-flex justify-content-between",onClick:function(){return m((function(e){return!e}))}},r.a.createElement("div",null,t),r.a.createElement("div",null,r.a.createElement(me,{collapsed:p}))),!!p||n)},be=function(){return r.a.createElement(de,{header:"Demand calculator",className:"m-1 demand-calculator",bg:"light"},r.a.createElement(u.a.Body,null,r.a.createElement(se,null)),r.a.createElement(le,null))},ye={setGrade:j},fe=Object(i.b)((function(e){return{currentMachineGrades:C(e)}}),ye)((function(e){var t=e.currentMachineGrades,n=e.setGrade;return console.log(Object.keys(p),Object.keys(v)),r.a.createElement(de,{header:"Machine grades",className:"m-1",bg:"light",initallyCollapsed:!0},r.a.createElement(u.a.Body,null,r.a.createElement(ue.a,null,Object.keys(p).map((function(e){return r.a.createElement(ue.a.Group,{key:e,as:J.a},r.a.createElement(ue.a.Label,{column:!0,sm:2},e),r.a.createElement(W.a,{className:"d-flex align-items-center"},r.a.createElement(ue.a.Control,{as:"select",custom:!0,value:t[e],onChange:function(t){return n({type:e,grade:t.target.value})}},v[e].map((function(e,t){return r.a.createElement("option",{key:e.name,value:t},e.name)})))))})))))})),Ee=(n(68),{setMiningLevel:w}),he=Object(i.b)((function(e){return{science:N(e)}}),Ee)((function(e){var t=e.science,n=e.setMiningLevel,c=Object(a.useRef)();return r.a.createElement(de,{header:"Science",className:"m-1",bg:"light",initallyCollapsed:!0},r.a.createElement(u.a.Body,null,r.a.createElement(ue.a,{onSubmit:function(e){e.preventDefault(),n(parseInt(c.current.value))}},r.a.createElement(ue.a.Group,{as:J.a},r.a.createElement(ue.a.Label,{column:!0,sm:2},"Mining"),r.a.createElement(W.a,{className:"d-flex align-items-center"},r.a.createElement(ue.a.Control,{type:"number",step:"1",min:"0",defaultValue:t.mining,ref:c}))))))})),ge=n(81),ve=Object(o.b)({name:"research",initialState:{labsCount:0,speedBonus:0},reducers:{setLabsCount:function(e,t){var n=t.payload;e.labsCount=n},setSpeedBonus:function(e,t){var n=t.payload;e.speedBonus=n}}}),Oe=ve.actions,je=Oe.setLabsCount,Se=Oe.setSpeedBonus,Ce=ve.reducer,Te=function(e){return e.research.labsCount},ke=function(e){return e.research.speedBonus},Ie=function(e){var t=Te(e),n=ke(e);return[{cycleTime:15},{cycleTime:30},{cycleTime:60}].map((function(e){return Object(k.a)({},e,{demand:(a=e.cycleTime,t/(a/60/(1+n/100)))});var a}))},Ae=function(){return r.a.createElement(de,{header:"Labs calculator",className:"m-1",bg:"light",initallyCollapsed:!1},r.a.createElement(u.a.Body,null,r.a.createElement(Ne,null),r.a.createElement(we,null)))},we=Object(i.b)((function(e){return{demands:Ie(e)}}))((function(e){var t=e.demands;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("p",{key:e.cycleTime},"Cycle time ",r.a.createElement("b",null,e.cycleTime,"s"),":"," ",r.a.createElement("b",null,Math.round(100*e.demand)/100)," ",r.a.createElement("sup",null,"probes"),"/",r.a.createElement("sub",null,"min"))})))})),Me={setLabsCount:je,setSpeedBonus:Se},Ne=Object(i.b)((function(e){return{labsCount:Te(e),speedBonus:ke(e)}}),Me)((function(e){var t=e.labsCount,n=e.setLabsCount,c=e.speedBonus,l=e.setSpeedBonus,u=Object(a.useRef)(),i=Object(a.useRef)();return r.a.createElement(ue.a,{onSubmit:function(e){e.preventDefault();var a=parseInt(u.current.value);a!==t&&n(a);var r=parseInt(i.current.value);r!==c&&l(r)}},r.a.createElement(ue.a.Row,null,r.a.createElement(ue.a.Group,{as:W.a},r.a.createElement(ue.a.Label,null,"# of labs"),r.a.createElement(ue.a.Control,{ref:u,type:"number",defaultValue:t,min:"0",step:"1"})),r.a.createElement(ue.a.Group,{as:W.a},r.a.createElement(ue.a.Label,null,"Speed bonus"),r.a.createElement(ie.a,null,r.a.createElement(ue.a.Control,{ref:i,type:"number",defaultValue:c}),r.a.createElement(ie.a.Append,null,r.a.createElement(ie.a.Text,null,"%"))))),r.a.createElement(ge.a,{type:"submit",style:{display:"none"}}))}));var Be=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(he,null),r.a.createElement(fe,null),r.a.createElement(Ae,null),r.a.createElement(be,null))},Ge=n(11),Le=Object(Ge.c)({demand:F,machineGrades:S,science:M,research:Ce}),Re="factorio-calculator.state";var Fe=function(){try{var e=localStorage.getItem(Re);if(null===e)return;return JSON.parse(e)}catch(t){return}}(),De=Object(o.a)({reducer:Le,preloadedState:Fe});De.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem(Re,t)}catch(n){}}(De.getState())}));var Pe=De;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:Pe},r.a.createElement(Be,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.2bcc1eb8.chunk.js.map