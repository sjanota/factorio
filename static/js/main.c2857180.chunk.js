(this.webpackJsonpfactorio=this.webpackJsonpfactorio||[]).push([[0],{52:function(e,t,n){e.exports=n(69)},57:function(e,t,n){},62:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),l=n.n(c),i=(n(57),n(80)),u=n(8),o=n(12),s=n(11),p={Assembly:"Assembly",Drill:"Drill",Furnace:"Furnace"},m={"Military science pack":{inputs:{Wall:2,Grenade:1,"Piercing rounds magazine":1},duration:.5,products:2,machineType:p.Assembly},Stone:{duration:1,products:1,machineType:p.Furnace},Coal:{duration:1,products:1,machineType:p.Drill},"Stone brick":{inputs:{Stone:2},duration:3.2,products:1,machineType:p.Furnace},Wall:{inputs:{"Stone brick":5},duration:.5,products:1,machineType:p.Assembly},Grenade:{inputs:{Coal:10,"Iron plate":5},duration:8,products:1,machineType:p.Assembly},"Piercing rounds magazine":{inputs:{"Copper plate":5,"Firearm magazine":1,"Steel plate":1},duration:3,products:1,machineType:p.Assembly},"Steel plate":{inputs:{"Iron plate":5},duration:16,products:1,machineType:p.Furnace},"Firearm magazine":{inputs:{"Iron plate":4},duration:1,products:1,machineType:p.Assembly},"Logistic science pack":{inputs:{Inserter:1,"Transport belt":1},duration:6,products:1,machineType:p.Assembly},Inserter:{inputs:{"Electronic circuit":1,"Iron plate":1,"Iron gear wheel":1},duration:.5,products:1,machineType:p.Assembly},"Iron ore":{duration:1,products:1,machineType:p.Drill},"Copper ore":{duration:1,products:1,machineType:p.Drill},"Iron plate":{inputs:{"Iron ore":1},duration:3.2,products:1,machineType:p.Furnace},"Iron gear wheel":{inputs:{"Iron plate":2},duration:.5,products:1,machineType:p.Assembly},"Copper plate":{inputs:{"Copper ore":1},duration:3.2,products:1,machineType:p.Furnace},"Copper wire":{inputs:{"Copper plate":1},duration:.5,products:2,machineType:p.Assembly},"Electronic circuit":{inputs:{"Iron plate":1,"Copper wire":3},duration:.5,products:1,machineType:p.Assembly},"Automation science pack":{inputs:{"Copper plate":1,"Iron gear wheel":1},duration:5,products:1,machineType:p.Assembly},"Transport belt":{inputs:{"Iron plate":1,"Iron gear wheel":1},duration:.5,products:2,machineType:p.Assembly}},d=function(){return m},b=function(e,t){return d()[t.item]},f=n(50),y=n(13);function E(e,t){var n=Object.entries(e.inputs).reduce((function(n,a){var r=Object(y.a)(a,2),c=r[0],l=r[1];return[].concat(Object(f.a)(n),[[c,l*t/e.products]])}),[]);return Object.fromEntries(n)}var g,h=n(9),v=(g={},Object(h.a)(g,p.Assembly,[{speed:.5,name:"Mk1"},{speed:.75,name:"Mk2"},{speed:1.25,name:"Mk3"}]),Object(h.a)(g,p.Drill,[{speed:.25,name:"Burning"},{speed:.5,name:"Electric"}]),Object(h.a)(g,p.Furnace,[{speed:1,name:"Stone"},{speed:2,name:"Steel"},{speed:2,name:"Electric"}]),g),O=Object(o.b)({name:"machineGrades",initialState:Object.fromEntries(Object.values(p).map((function(e){return[e,0]}))),reducers:{setGrade:function(e,t){var n=t.payload,a=n.type,r=n.grade;e[a]=r}}}),j=O.actions.setGrade,S=O.reducer,T=function(e){return e.machineGrades},C=Object(s.a)([T,b],(function(e,t){if(t){var n=e[t.machineType];return v[t.machineType][n]}})),k=n(35);function I(e,t,n){if(!e.inputs)return{};var a=E(e,n);return Object.entries(a).reduce((function(e,n){var a=Object(y.a)(n,2),r=a[0],c=a[1];return function(e,t){var n=Object.keys(t),a=Object.keys(e).filter((function(e){return n.includes(e)})),r=Object(k.a)({},e,{},t);return a.reduce((function(n,a){return Object(k.a)({},n,Object(h.a)({},a,e[a]+t[a]))}),r)}(e,I(t[r],t,c))}),a)}var w=Object(o.b)({name:"science",initialState:{mining:0},reducers:{setMiningLevel:function(e,t){var n=t.payload;e.mining=n}}}),A=w.actions.setMiningLevel,M=w.reducer,N=function(e){return e.science},G=Object(o.b)({name:"demand",initialState:{item:null,targetSupply:1},reducers:{setCurrentRecipe:function(e,t){var n=t.payload;e.item=n},setTargetSupply:function(e,t){var n=t.payload;e.targetSupply=n}}}),F=G.actions,D=F.setCurrentRecipe,R=F.setTargetSupply,L=G.reducer,x=function(e){return e.demand.item},B=function(e){return e.demand.targetSupply},z=(Object(s.a)([b,function(e,t){return t.targetSupply}],(function(e,t){if(e&&e.inputs)return E(e,t)})),Object(s.a)([b,d,function(e,t){return t.targetSupply}],(function(e,t,n){if(e&&e.inputs)return I(e,t,n)}))),J=Object(s.a)([b,C,N,function(e,t){return t.targetSupply}],(function(e,t,n,a){if(e){var r=t.speed;return e.machineType===p.Drill&&(r*=1+.1*n.mining),function(e,t,n){return Math.ceil(e.duration/n*t/60/e.products)}(e,a,r)}})),W=n(79),q=n(75),V=n(47),H="Normal",P="Fast",$="Express",K="Overloaded";var Q,U=function(e){return function(t){return function(n){return!!n[e]&&r.a.createElement(t,n)}}},X=Object(u.b)((function(e,t){return{requiredMachines:J(e,t),recipe:b(0,t)}}))(U("item")((function(e){var t=e.requiredMachines,n=e.recipe;return r.a.createElement("span",null,t," ",n.machineType)}))),Y=(n(62),function(){return r.a.createElement("small",null,r.a.createElement("sup",null,"pcs"),"/",r.a.createElement("sub",null,"min"))}),Z=n(24),_=n(20),ee=n(78),te=n(74),ne=(Q={},Object(h.a)(Q,H,"Regular transport belts"),Object(h.a)(Q,P,"Fast transport belts"),Object(h.a)(Q,$,"Express transport belts"),Object(h.a)(Q,K,"The belt is overloaded, you need to use more then one parallel belt or split the process"),Q),ae=function(e){var t=e.beltType;return r.a.createElement(ee.a,{placement:"left",overlay:function(e){return r.a.createElement(te.a,Object.assign({id:"button-tooltip"},e),ne[t])}},r.a.createElement("span",{className:"belt-type-".concat(t.toLowerCase())},r.a.createElement(Z.a,{icon:_.a,size:"lg"})))},re=function(e){var t=e.item,n=e.targetSupply,a=function(e){return e<=900?H:e<=1800?P:e<=2700?$:K}(n);return r.a.createElement(W.a.Item,{className:"ingredients-row belt-".concat(a.toLowerCase())},r.a.createElement(q.a,null,r.a.createElement(V.a,{sm:5},t),r.a.createElement(V.a,{sm:3},n," ",r.a.createElement(Y,null)),r.a.createElement(V.a,{sm:3},r.a.createElement(X,{item:t,targetSupply:n})),r.a.createElement(V.a,null,r.a.createElement(ae,{beltType:a}))))},ce=Object(u.b)((function(e,t){return{ingredients:z(e,t)}}))((function(e){var t=e.ingredients;return r.a.createElement(W.a,{className:"list-group-flush"},Object.entries(t).map((function(e){var t=Object(y.a)(e,2),n=t[0],a=t[1];return r.a.createElement(re,{key:n,item:n,targetSupply:a})})))})),le=Object(u.b)((function(e){return{item:x(e),targetSupply:B(e)}}))(U("item")(ce)),ie=n(77),ue=n(76),oe={setTargetSupply:R,setCurrentRecipe:D},se=Object(u.b)((function(e,t){return{item:x(e),targetSupply:B(e),availableRecipes:Object.keys(d()),requiredMachines:J(e,t),recipe:b(0,t)}}),oe)((function(e){var t=e.setTargetSupply,n=e.setCurrentRecipe,c=e.item,l=e.availableRecipes,i=e.targetSupply,u=Object(a.useRef)();function o(e){e.preventDefault();var n=Number.parseInt(u.current.value);t(n)}return r.a.createElement(ie.a,{onSubmit:o},r.a.createElement(ie.a.Row,null,r.a.createElement(ie.a.Group,{as:V.a,sm:5,className:"mb-0"},r.a.createElement(ie.a.Control,{as:"select",placeholder:"Item",custom:!0,defaultValue:c,onChange:function(e){return n(e.target.value)}},r.a.createElement("option",{value:c},c),l.sort().map((function(e){return e!==c&&r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(ie.a.Group,{as:V.a,sm:3,className:"mb-0"},r.a.createElement(ue.a,null,r.a.createElement(ie.a.Control,{type:"number",placeholder:"Target Supply",step:"1",defaultValue:i,ref:u,onBlur:o}),r.a.createElement(ue.a.Append,null,r.a.createElement(ue.a.Text,null,r.a.createElement(Y,null))))),r.a.createElement(V.a,{className:"d-flex align-items-center pl-3"},r.a.createElement(X,{item:c,targetSupply:i}))))})),pe=function(){return r.a.createElement(i.a,{className:"m-1 demand-calculator",bg:"light"},r.a.createElement(i.a.Header,null,"Demand calculator"),r.a.createElement(i.a.Body,null,r.a.createElement(se,null)),r.a.createElement(le,null))},me=n(51),de=function(e){var t=e.collapsed,n=e.onClick;return r.a.createElement(Z.a,{icon:t?_.b:_.c,onClick:n})},be=function(e){var t=e.header,n=e.children,c=e.initallyCollapsed,l=void 0!==c&&c,u=Object(me.a)(e,["header","children","initallyCollapsed"]),o=Object(a.useState)(l),s=Object(y.a)(o,2),p=s[0],m=s[1];return r.a.createElement(i.a,u,r.a.createElement(i.a.Header,{className:"d-flex justify-content-between",onClick:function(){return m((function(e){return!e}))}},r.a.createElement("div",null,t),r.a.createElement("div",null,r.a.createElement(de,{collapsed:p}))),!!p||n)},fe={setGrade:j},ye=Object(u.b)((function(e){return{currentMachineGrades:T(e)}}),fe)((function(e){var t=e.currentMachineGrades,n=e.setGrade;return r.a.createElement(be,{header:"Machine grades",className:"m-1",bg:"light",initallyCollapsed:!0},r.a.createElement(i.a.Body,null,r.a.createElement(ie.a,null,Object.keys(p).map((function(e){return r.a.createElement(ie.a.Group,{key:e,as:q.a},r.a.createElement(ie.a.Label,{column:!0,sm:2},e),r.a.createElement(V.a,{className:"d-flex align-items-center"},r.a.createElement(ie.a.Control,{as:"select",custom:!0,value:t[e],onChange:function(t){return n({type:e,grade:t.target.value})}},v[e].map((function(e,t){return r.a.createElement("option",{key:e.name,value:t},e.name)})))))})))))})),Ee=(n(68),{setMiningLevel:A}),ge=Object(u.b)((function(e){return{science:N(e)}}),Ee)((function(e){var t=e.science,n=e.setMiningLevel,c=Object(a.useRef)();return r.a.createElement(be,{header:"Science",className:"m-1",bg:"light",initallyCollapsed:!0},r.a.createElement(i.a.Body,null,r.a.createElement(ie.a,{onSubmit:function(e){e.preventDefault(),n(parseInt(c.current.value))}},r.a.createElement(ie.a.Group,{as:q.a},r.a.createElement(ie.a.Label,{column:!0,sm:2},"Mining"),r.a.createElement(V.a,{className:"d-flex align-items-center"},r.a.createElement(ie.a.Control,{type:"number",step:"1",min:"0",defaultValue:t.mining,ref:c}))))))}));var he=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ge,null),r.a.createElement(ye,null),r.a.createElement(pe,null))},ve=n(10),Oe=Object(ve.c)({demand:L,machineGrades:S,science:M}),je="factorio-calculator.state";var Se=function(){try{var e=localStorage.getItem(je);if(null===e)return;return JSON.parse(e)}catch(t){return}}(),Te=Object(o.a)({reducer:Oe,preloadedState:Se});Te.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem(je,t)}catch(n){}}(Te.getState())}));var Ce=Te;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:Ce},r.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.c2857180.chunk.js.map