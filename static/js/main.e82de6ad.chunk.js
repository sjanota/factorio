(this.webpackJsonpfactorio=this.webpackJsonpfactorio||[]).push([[0],{52:function(e,t,a){e.exports=a(69)},57:function(e,t,a){},62:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),u=(a(57),a(80)),i=a(9),o=a(14),s=a(11),p={Assembly:"Assembly",Drill:"Drill",Furnace:"Furnace"},m={"Logistic science pack":{inputs:{Inserter:1,"Transport belt":1},duration:6,products:1,machineType:p.Assembly},Inserter:{inputs:{"Electronic circuit":1,"Iron plate":1,"Iron gear wheel":1},duration:.5,products:1,machineType:p.Assembly},"Iron ore":{duration:1,products:1,machineType:p.Drill},"Copper ore":{duration:1,products:1,machineType:p.Drill},"Iron plate":{inputs:{"Iron ore":1},duration:3.2,products:1,machineType:p.Furnace},"Iron gear wheel":{inputs:{"Iron plate":2},duration:.5,products:1,machineType:p.Assembly},"Copper plate":{inputs:{"Copper ore":1},duration:3.2,products:1,machineType:p.Furnace},"Copper wire":{inputs:{"Copper plate":1},duration:.5,products:2,machineType:p.Assembly},"Electronic circuit":{inputs:{"Iron plate":1,"Copper wire":3},duration:.5,products:1,machineType:p.Assembly},"Automation science pack":{inputs:{"Copper plate":1,"Iron gear wheel":1},duration:5,products:1,machineType:p.Assembly},"Transport belt":{inputs:{"Iron plate":1,"Iron gear wheel":1},duration:.5,products:2,machineType:p.Assembly}},d=function(){return m},b=function(e,t){return d()[t.item]},f=a(50),y=a(12);function E(e,t){var a=Object.entries(e.inputs).reduce((function(a,n){var r=Object(y.a)(n,2),c=r[0],l=r[1];return[].concat(Object(f.a)(a),[[c,l*t/e.products]])}),[]);return Object.fromEntries(a)}var h,g=a(8),v=(h={},Object(g.a)(h,p.Assembly,[{speed:.5,name:"Mk1"},{speed:.75,name:"Mk2"},{speed:1.25,name:"Mk3"}]),Object(g.a)(h,p.Drill,[{speed:.25,name:"Burning"},{speed:.5,name:"Electric"}]),Object(g.a)(h,p.Furnace,[{speed:1,name:"Stone"},{speed:2,name:"Steel"},{speed:2,name:"Electric"}]),h),O=Object(o.b)({name:"machineGrades",initialState:Object.fromEntries(Object.values(p).map((function(e){return[e,0]}))),reducers:{setGrade:function(e,t){var a=t.payload,n=a.type,r=a.grade;e[n]=r}}}),j=O.actions.setGrade,S=O.reducer,T=function(e){return e.machineGrades},C=Object(s.a)([T,b],(function(e,t){if(t){var a=e[t.machineType];return v[t.machineType][a]}})),k=a(35);function w(e,t,a){if(!e.inputs)return{};var n=E(e,a);return Object.entries(n).reduce((function(e,a){var n=Object(y.a)(a,2),r=n[0],c=n[1];return function(e,t){var a=Object.keys(t),n=Object.keys(e).filter((function(e){return a.includes(e)})),r=Object(k.a)({},e,{},t);return n.reduce((function(a,n){return Object(k.a)({},a,Object(g.a)({},n,e[n]+t[n]))}),r)}(e,w(t[r],t,c))}),n)}var I=Object(o.b)({name:"demand",initialState:{item:null,targetSupply:1},reducers:{setCurrentRecipe:function(e,t){var a=t.payload;e.item=a},setTargetSupply:function(e,t){var a=t.payload;e.targetSupply=a}}}),N=I.actions,A=N.setCurrentRecipe,G=N.setTargetSupply,M=I.reducer,R=function(e){return e.demand.item},x=function(e){return e.demand.targetSupply},D=(Object(s.a)([b,function(e,t){return t.targetSupply}],(function(e,t){if(e&&e.inputs)return E(e,t)})),Object(s.a)([b,d,function(e,t){return t.targetSupply}],(function(e,t,a){if(e&&e.inputs)return w(e,t,a)}))),F=Object(s.a)([b,C,function(e,t){return t.targetSupply}],(function(e,t,a){if(e)return function(e,t,a){return Math.ceil(e.duration/a*t/60/e.products)}(e,a,t.speed)})),B=a(79),J=a(75),L=a(47),q="Normal",H="Fast",V="Express",W="Overloaded";var z,$=function(e){return function(t){return function(a){return!!a[e]&&r.a.createElement(t,a)}}},K=Object(i.b)((function(e,t){return{requiredMachines:F(e,t),recipe:b(0,t)}}))($("item")((function(e){var t=e.requiredMachines,a=e.recipe;return r.a.createElement("span",null,t," ",a.machineType)}))),P=(a(62),function(){return r.a.createElement("small",null,r.a.createElement("sup",null,"pcs"),"/",r.a.createElement("sub",null,"min"))}),Q=a(24),U=a(20),X=a(78),Y=a(74),Z=(z={},Object(g.a)(z,q,"Regular transport belts"),Object(g.a)(z,H,"Fast transport belts"),Object(g.a)(z,V,"Express transport belts"),Object(g.a)(z,W,"The belt is overloaded, you need to use more then one parallel belt or split the process"),z),_=function(e){var t=e.beltType;return r.a.createElement(X.a,{placement:"left",overlay:function(e){return r.a.createElement(Y.a,Object.assign({id:"button-tooltip"},e),Z[t])}},r.a.createElement("span",{className:"belt-type-".concat(t.toLowerCase())},r.a.createElement(Q.a,{icon:U.a,size:"lg"})))},ee=function(e){var t=e.item,a=e.targetSupply,n=function(e){return e<=900?q:e<=1800?H:e<=2700?V:W}(a);return r.a.createElement(B.a.Item,{className:"ingredients-row belt-".concat(n.toLowerCase())},r.a.createElement(J.a,null,r.a.createElement(L.a,{sm:5},t),r.a.createElement(L.a,{sm:3},a," ",r.a.createElement(P,null)),r.a.createElement(L.a,{sm:3},r.a.createElement(K,{item:t,targetSupply:a})),r.a.createElement(L.a,null,r.a.createElement(_,{beltType:n}))))},te=Object(i.b)((function(e,t){return{ingredients:D(e,t)}}))((function(e){var t=e.ingredients;return r.a.createElement(B.a,{className:"list-group-flush"},Object.entries(t).map((function(e){var t=Object(y.a)(e,2),a=t[0],n=t[1];return r.a.createElement(ee,{key:a,item:a,targetSupply:n})})))})),ae=Object(i.b)((function(e){return{item:R(e),targetSupply:x(e)}}))($("item")(te)),ne=a(77),re=a(76),ce={setTargetSupply:G,setCurrentRecipe:A},le=Object(i.b)((function(e,t){return{item:R(e),targetSupply:x(e),availableRecipes:Object.keys(d()),requiredMachines:F(e,t),recipe:b(0,t)}}),ce)((function(e){var t=e.setTargetSupply,a=e.setCurrentRecipe,c=e.item,l=e.availableRecipes,u=e.targetSupply,i=Object(n.useRef)();function o(e){e.preventDefault();var a=Number.parseInt(i.current.value);t(a)}return r.a.createElement(ne.a,{onSubmit:o},r.a.createElement(ne.a.Row,null,r.a.createElement(ne.a.Group,{as:L.a,sm:5,className:"mb-0"},r.a.createElement(ne.a.Control,{as:"select",placeholder:"Item",custom:!0,defaultValue:c,onChange:function(e){return a(e.target.value)}},r.a.createElement("option",{value:c},c),l.sort().map((function(e){return e!==c&&r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(ne.a.Group,{as:L.a,sm:3,className:"mb-0"},r.a.createElement(re.a,null,r.a.createElement(ne.a.Control,{type:"number",placeholder:"Target Supply",step:"1",defaultValue:u,ref:i,onBlur:o}),r.a.createElement(re.a.Append,null,r.a.createElement(re.a.Text,null,r.a.createElement(P,null))))),r.a.createElement(L.a,{className:"d-flex align-items-center pl-3"},r.a.createElement(K,{item:c,targetSupply:u}))))})),ue=function(){return r.a.createElement(u.a,{className:"m-1 demand-calculator",bg:"light"},r.a.createElement(u.a.Header,null,"Demand calculator"),r.a.createElement(u.a.Body,null,r.a.createElement(le,null)),r.a.createElement(ae,null))},ie=a(51),oe=function(e){var t=e.collapsed,a=e.onClick;return r.a.createElement(Q.a,{icon:t?U.b:U.c,onClick:a})},se=function(e){var t=e.header,a=e.children,c=e.initallyCollapsed,l=void 0!==c&&c,i=Object(ie.a)(e,["header","children","initallyCollapsed"]),o=Object(n.useState)(l),s=Object(y.a)(o,2),p=s[0],m=s[1];return r.a.createElement(u.a,i,r.a.createElement(u.a.Header,{className:"d-flex justify-content-between"},r.a.createElement("div",null,t),r.a.createElement("div",null,r.a.createElement(oe,{collapsed:p,onClick:function(){return m((function(e){return!e}))}}))),!!p||a)},pe={setGrade:j},me=Object(i.b)((function(e){return{currentMachineGrades:T(e)}}),pe)((function(e){var t=e.currentMachineGrades,a=e.setGrade;return r.a.createElement(se,{header:"Machine grades",className:"m-1",bg:"light",initallyCollapsed:!0},r.a.createElement(u.a.Body,null,r.a.createElement(ne.a,null,Object.keys(p).map((function(e){return r.a.createElement(ne.a.Group,{key:e,as:J.a},r.a.createElement(ne.a.Label,{column:!0,sm:2},e),r.a.createElement(L.a,{className:"d-flex align-items-center"},r.a.createElement(ne.a.Control,{as:"select",custom:!0,value:t[e],onChange:function(t){return a({type:e,grade:t.target.value})}},v[e].map((function(e,t){return r.a.createElement("option",{key:e.name,value:t},e.name)})))))})))))}));a(68);var de=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(me,null),r.a.createElement(ue,null))},be=a(10),fe=Object(be.c)({demand:M,machineGrades:S}),ye="factorio-calculator.state";var Ee=function(){try{var e=localStorage.getItem(ye);if(null===e)return;return JSON.parse(e)}catch(t){return}}(),he=Object(o.a)({reducer:fe,preloadedState:Ee});he.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem(ye,t)}catch(a){}}(he.getState())}));var ge=he;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:ge},r.a.createElement(de,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.e82de6ad.chunk.js.map